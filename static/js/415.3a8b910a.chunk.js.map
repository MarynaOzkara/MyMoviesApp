{"version":3,"file":"static/js/415.3a8b910a.chunk.js","mappings":"oPA2DA,UA7Ca,WACX,IAAMA,GAASC,EAAAA,EAAAA,IAAYC,EAAAA,IACrBC,GAAOF,EAAAA,EAAAA,IAAYG,EAAAA,IACnBC,GAAaJ,EAAAA,EAAAA,IAAYK,EAAAA,IACzBC,GAAYN,EAAAA,EAAAA,IAAYO,EAAAA,IACxBC,GAAWC,EAAAA,EAAAA,MAgCjB,OA9BAC,EAAAA,EAAAA,YAAU,WACRF,GAASG,EAAAA,EAAAA,MACX,GAAG,CAACH,KAEJE,EAAAA,EAAAA,YAAU,WACR,IAAME,EAAgBC,KAAS,SAAAC,IACX,IAAdR,IAGiBQ,EAAEC,OAAOC,gBAAgBC,cAC5BH,EAAEC,OAAOC,gBAAgBE,UACtBC,OAAOC,aAEkB,KAC5ClB,EAAOE,IAEPiB,QAAQC,IAAIR,GACZN,GAASG,EAAAA,EAAAA,IAAkBT,KAM/B,IAEA,OADAqB,SAASC,iBAAiB,SAAUZ,GAC7B,WACLW,SAASE,oBAAoB,SAAUb,EACzC,CACF,GAAG,CAACJ,EAAUN,EAAME,EAAYE,KAG9BoB,EAAAA,EAAAA,MAAA,QAAAC,SAAA,EACEC,EAAAA,EAAAA,KAACC,EAAAA,GAAK,CAAAF,SAAC,mBACNrB,IAAasB,EAAAA,EAAAA,KAACE,EAAAA,EAAM,IACpB/B,IAAU6B,EAAAA,EAAAA,KAACG,EAAAA,EAAU,CAAChC,OAAQA,MAGrC,C","sources":["pages/Home.jsx"],"sourcesContent":["import { Title } from 'components/App.styled';\nimport Loader from 'components/Loader/Loader';\nimport MoviesList from 'components/MoviesList/MoviesList';\nimport { useEffect } from 'react';\nimport { getTrendingMovies } from 'redux/movies/movie-api';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectIsLoading,\n  selectMovies,\n  selectPage,\n  selectTotalPages,\n} from 'redux/selectors';\nimport throttle from 'lodash.throttle';\n\nconst Home = () => {\n  const movies = useSelector(selectMovies);\n  const page = useSelector(selectPage);\n  const totalPages = useSelector(selectTotalPages);\n  const isLoading = useSelector(selectIsLoading);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getTrendingMovies());\n  }, [dispatch]);\n\n  useEffect(() => {\n    const scrollHandler = throttle(e => {\n      if (isLoading === true) {\n        return;\n      }\n      const scrollHeight = e.target.documentElement.scrollHeight;\n      const heightTop = e.target.documentElement.scrollTop;\n      const windowHeight = window.innerHeight;\n      if (\n        scrollHeight - (heightTop + windowHeight) < 100 &&\n        page < totalPages\n      ) {\n        console.log(e);\n        dispatch(getTrendingMovies(page));\n      }\n\n      // console.log(scrollHeight);\n      // console.log(heightTop);\n      // console.log(windowHeight);\n    });\n    document.addEventListener('scroll', scrollHandler);\n    return function () {\n      document.removeEventListener('scroll', scrollHandler);\n    };\n  }, [dispatch, page, totalPages, isLoading]);\n\n  return (\n    <main>\n      <Title>Trending today</Title>\n      {isLoading && <Loader />}\n      {movies && <MoviesList movies={movies} />}\n    </main>\n  );\n};\nexport default Home;\n"],"names":["movies","useSelector","selectMovies","page","selectPage","totalPages","selectTotalPages","isLoading","selectIsLoading","dispatch","useDispatch","useEffect","getTrendingMovies","scrollHandler","throttle","e","target","documentElement","scrollHeight","scrollTop","window","innerHeight","console","log","document","addEventListener","removeEventListener","_jsxs","children","_jsx","Title","Loader","MoviesList"],"sourceRoot":""}